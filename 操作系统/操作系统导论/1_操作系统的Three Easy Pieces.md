## 虚拟化

指的是**操作系统把物理资源转化为更为通用、强大、更易使用的虚拟形式** ^700cb2

操作系统为用户提供了一些接口（API），也提供了一些系统调用。区别详见[[操作系统接口与系统调用的区别]] ^e5b0a3

虚拟化使每个程序都感觉有自己一套独立的CPU，内存，磁盘，使许多程序“同时”运行。因此操作系统又被叫做**资源管理器**

### 虚拟化CPU

单处理器情况下，多个代码实例却好像同时运行，这就是**虚拟化CPU**。将单个处理器转化为无限数量的虚拟CPU，并通过一定的策略（Policy）确定当前运行的程序

例子：多个字符打印代码文件实例同时运行。

### 虚拟化内存

物理内存模型：**一个字节数组**   
进行读，写，更新操作：指定地址并且给予数据

例子：多个对同一地址空间数值操作的代码实例运行彼此之间没有影响。但实际上，这个地址空间是各个实例自己私有的虚拟化地址空间，并以映射的方式映射到不同的物理空间中。对于正在运行的程序都有自己的物理内存。<--- Copy-on-Write

程序进程标识符（PID）

## 并发

例子：多线程并发对同一物理空间进行操作，例：**共享计数器累加**    本质上是因为累加操作不是原子操作

需要杜绝并发情况发生

## 持久性

操作系统会假设每个用户都会有大量共享和访问磁盘当中内容的需求，因此不会对磁盘进行虚拟化，同时通过一系列复杂的系统调用和写入协议保障写入的高效性与正确性

例：文件的写入操作

## 设计目标

- 1.抽象，让系统便于操作和使用
- 2.高性能，减少操作系统对于时间和空间的消耗，即减少指令数和对磁盘的空间的占用
- 3.在OS和应用程序之间提供保护，确保恶意的程序不会影响到其他程序和系统本身，实现**保护隔离**

### 一些其他概念

批处理：操作员（操作系统）分批有顺序的运行将执行的任务

系统调用：人们认为操作系统执行的代码应该是特殊的，出现了系统调用，用户通过接口实现系统调用，提升特权级，实现I/O请求等操作。系统调用一般是一些硬件指令和硬件状态（用于返回系统调用是否成功）

多道程序运行：因为I/O处理与CPU处理速度差距大，因此通过加载大量程序到内存中并且快速切换提升CPU的利用率

☑️